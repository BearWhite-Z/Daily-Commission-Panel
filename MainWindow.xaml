<Window x:Class="DailyOrderPanel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DailyOrderPanel"
        mc:Ignorable="d"
        Title="DOPæ¯æ—¥å§”æ‰˜é¢æ¿"
        Background="#FFFFFF"
        WindowStyle="SingleBorderWindow"
        AllowsTransparency="False"
        WindowStartupLocation="CenterScreen"
        WindowState="Normal"
        SnapsToDevicePixels="True"
        RenderOptions.BitmapScalingMode="HighQuality"
        RenderOptions.ClearTypeHint="Enabled"
        TextOptions.TextFormattingMode="Display"
        TextOptions.TextRenderingMode="ClearType" d:DesignWidth="913.054">
    <Window.Resources>
        <Style x:Key="TitleTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextColor}"/>
        </Style>
        <Style x:Key="SubtitleTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Foreground" Value="{DynamicResource SecondaryTextColor}"/>
        </Style>
    </Window.Resources>
    <!-- æ ¹å®¹å™¨ -->
    <Grid>
        <!-- é¡¶éƒ¨åŒºåŸŸ - åŒ…å«çª—å£æŽ§åˆ¶æŒ‰é’®å’Œæ ‡é¢˜æ  -->
        <Border x:Name="Header" Height="120" VerticalAlignment="Top" Background="{DynamicResource HeaderBackgroundColor}" ClipToBounds="True">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- çª—å£æŽ§åˆ¶æŒ‰é’®åŒºåŸŸ - ä»…ä¿ç•™å…¨å±æŒ‰é’® -->
                <StackPanel Grid.Column="2" Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,5,0,0">
                    <Button x:Name="FullScreenBtn" Content="â–¡" Width="40" Height="40" Background="Transparent" BorderThickness="0" Click="FullScreenBtn_Click" Foreground="{DynamicResource TextColor}" FontSize="16" FontFamily="Segoe UI Symbol" Padding="0" ToolTip="å…¨å±"/>
                </StackPanel>

                <!-- å·¦ä¾§ä¿¡æ¯ -->
                <StackPanel Grid.Column="0" Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="30,0,20,0">
                    <TextBlock Text="çŽ°åœ¨æ˜¯è‡ªä¹ æ—¶é—´ðŸ¤«" FontSize="20" Foreground="White"/>
                    <TextBlock FontSize="28" Foreground="#FFAEDCD7"/>
                </StackPanel>

                <!-- æ—¶é—´æ˜¾ç¤ºåŒºåŸŸ -->
                <Grid Grid.Column="1" Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <!-- å½“å‰æ—¶é—´ -->
                        <Border Background="{DynamicResource TimerBackgroundColor}" CornerRadius="8" Padding="15,10,15,10" MinWidth="140" Margin="0,0,15,0">
                            <StackPanel>
                                <TextBlock Text="å½“å‰æ—¶é—´" FontSize="14" Foreground="{DynamicResource TimerLabelColor}" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="CurrentTimeText" FontSize="22" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Text="{Binding CurrentTime}" MinWidth="110"/>
                            </StackPanel>
                        </Border>

                        <!-- å‰©ä½™æ—¶é—´ -->
                        <Border CornerRadius="8" Padding="15,10,15,10" MinWidth="140" Background="{DynamicResource TimerBackgroundColor}">
                            <StackPanel>
                                <TextBlock Text="å‰©ä½™æ—¶é—´" FontSize="14" Foreground="{DynamicResource TimerLabelColor}" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="CountdownText" FontSize="22" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Text="{Binding Countdown}" MinWidth="110"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>

                <!-- å³ä¾§æŒ‰é’® -->
                <StackPanel Grid.Column="2" Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,30,0">
                    <Button x:Name="ModeToggleButton" Style="{DynamicResource NavButtonStyle}" Click="ModeToggleButton_Click" Content="æ•™å¸ˆç«¯" Margin="0,0,8,0" Background="#FF7EABE0"/>
                    <Button x:Name="ThemeToggle" Style="{DynamicResource ThemeToggleButtonStyle}" Click="ThemeToggle_Click" Content="â˜€"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ä¸»å†…å®¹åŒºåŸŸ - ä½¿ç”¨ä¸»é¢˜èƒŒæ™¯è‰² -->
        <Border Background="{DynamicResource PanelBackgroundColor}" ClipToBounds="True" Margin="0,120,0,30">
            <Grid>
                <!-- å­¦ç”Ÿç«¯é¡µé¢ -->
                <Grid x:Name="StudentPage">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- å·¦ä¾§è§„åˆ™åŒºåŸŸ -->
                    <Border Grid.Column="0" Margin="20" Background="{DynamicResource PanelBackgroundColor}" CornerRadius="12" Padding="20" Width="280">
                        <StackPanel>
                            <TextBlock Text="è‡ªä¹ å®ˆåˆ™" Style="{StaticResource TitleTextStyle}" Margin="0,0,0,20"/>
                            <ItemsControl ItemsSource="{Binding Rules}" Background="Transparent" BorderThickness="0">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}" Margin="0,0,0,12" TextWrapping="Wrap" FontSize="16" Foreground="{DynamicResource TextColor}"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- è‡ªå®šä¹‰å›¾ç‰‡åŒºåŸŸ -->
                            <Border Margin="0,20,0,0" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1" CornerRadius="10" Height="180">
                                <Grid Background="{DynamicResource ImagePlaceholderBackgroundColor}" VerticalAlignment="Stretch">
                                    <Image x:Name="CustomImage" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform"/>
                                    <TextBlock x:Name="NoImageText" Text="æš‚æ— å›¾ç‰‡æç¤º" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{DynamicResource PlaceholderTextColor}" FontStyle="Italic" FontSize="15"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- å³ä¾§ä½œä¸šåŒºåŸŸ -->
                    <Border Grid.Column="1" Margin="10,20,20,20" Background="{DynamicResource PanelBackgroundColor}" CornerRadius="12" Padding="20">
                        <StackPanel>
                            <TextBlock Text="ä»Šæ—¥ä½œä¸š" Style="{StaticResource TitleTextStyle}" Margin="0,0,0,20"/>
                            <ItemsControl x:Name="HomeworkList" ItemsSource="{Binding HomeworkItems}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Columns="3"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{DynamicResource CardStyle}" Margin="5" Height="Auto">
                                            <StackPanel>
                                                <Border BorderBrush="{DynamicResource BorderColor}" BorderThickness="0,0,0,2" Margin="0,0,0,15" Padding="0,15,0,0">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="{Binding Icon}" FontSize="28" Margin="0,0,15,0" Foreground="{DynamicResource TextColor}"/>
                                                        <TextBlock Text="{Binding Subject}" FontSize="22" FontWeight="Bold" Foreground="{Binding SubjectColor}"/>
                                                    </StackPanel>
                                                </Border>
                                                <TextBlock Text="{Binding Content}" FontSize="28" TextWrapping="Wrap" Foreground="{DynamicResource TextColor}"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- æ•™å¸ˆç«¯é¡µé¢ -->
                <Grid x:Name="TeacherPage" Visibility="Collapsed">
                    <Border Margin="10" Background="{DynamicResource PanelBackgroundColor}" CornerRadius="10" Padding="15">
                        <ScrollViewer>
                            <StackPanel>
                                <TextBlock Text="å¸ƒç½®ä½œä¸š" FontSize="20" FontWeight="Bold" Foreground="{DynamicResource TextColor}"/>

                                <!-- ç§‘ç›®é€‰æ‹© -->
                                <StackPanel>
                                    <TextBlock Text="é€‰æ‹©ç§‘ç›®" FontSize="15" FontWeight="Bold" Margin="0,0,0,10" Foreground="{DynamicResource TextColor}"/>
                                    <ComboBox x:Name="SubjectComboBox" Width="300" Height="30" FontSize="15">
                                        <ComboBoxItem Content="è¯­æ–‡"/>
                                        <ComboBoxItem Content="æ•°å­¦"/>
                                        <ComboBoxItem Content="è‹±è¯­"/>
                                        <ComboBoxItem Content="ç‰©ç†"/>
                                        <ComboBoxItem Content="åŒ–å­¦"/>
                                        <ComboBoxItem Content="ç”Ÿç‰©"/>
                                    </ComboBox>
                                </StackPanel>

                                <!-- ä½œä¸šå†…å®¹ -->
                                <StackPanel>
                                    <TextBlock Text="ä½œä¸šå†…å®¹" FontSize="15" FontWeight="Bold" Margin="0,0,0,10" Foreground="{DynamicResource TextColor}"/>
                                    <TextBox x:Name="HomeworkTextBox" Height="120" Width="500" FontSize="15" TextWrapping="Wrap" AcceptsReturn="True" Foreground="{DynamicResource TextColor}"/>
                                </StackPanel>

                                <!-- æ“ä½œæŒ‰é’® -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                    <Button x:Name="SubmitBtn" Content="å¸ƒç½®ä½œä¸š" Style="{DynamicResource ActionButtonStyle}" Click="SubmitBtn_Click" Margin="0,0,15,0"/>
                                    <Button x:Name="ClearBtn" Content="æ¸…ç©ºæ‰€æœ‰" Style="{DynamicResource ClearButtonStyle}" Click="ClearBtn_Click"/>
                                </StackPanel>

                                <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->
                                <Border Margin="0,10,0,0" Padding="15,0,0,0" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1,1,0,0">
                                    <StackPanel>
                                        <TextBlock Text="ä¸Šä¼ æç¤ºå›¾ç‰‡" FontSize="18" FontWeight="Bold" Margin="0,0,0,15" Foreground="{DynamicResource TextColor}"/>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                            <Button x:Name="UploadImageBtn" Content="é€‰æ‹©å›¾ç‰‡" Style="{DynamicResource ActionButtonStyle}" Click="UploadImageBtn_Click" Margin="0,0,15,0"/>
                                            <Button x:Name="ClearImageBtn" Content="æ¸…é™¤å›¾ç‰‡" Style="{DynamicResource ClearButtonStyle}" Click="ClearImageBtn_Click"/>
                                        </StackPanel>
                                        <TextBlock Text="ä¸Šä¼ çš„å›¾ç‰‡å°†æ˜¾ç¤ºåœ¨å­¦ç”Ÿç«¯å·¦ä¸‹è§’" FontSize="13" Margin="0,10,0,0" Foreground="{DynamicResource SecondaryTextColor}"/>
                                    </StackPanel>
                                </Border>

                                <!-- å¯¼å…¥å¯¼å‡ºæŒ‰é’® -->
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <Button x:Name="ImportBtn" Content="å¯¼å…¥ä½œä¸š" Style="{DynamicResource ImportButtonStyle}" Click="ImportBtn_Click" Margin="0,0,15,0"/>
                                    <Button x:Name="ExportBtn" Content="å¯¼å‡ºä½œä¸š" Style="{DynamicResource ExportButtonStyle}" Click="ExportBtn_Click"/>
                                </StackPanel>

                                <!-- å·²å¸ƒç½®ä½œä¸š -->
                                <Border Margin="0,10,0,0" Padding="15,0,0,0" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1,1,0,0">
                                    <StackPanel>
                                        <TextBlock Text="å·²å¸ƒç½®ä½œä¸š" FontSize="18" FontWeight="Bold" Margin="0,0,0,15" Foreground="{DynamicResource TextColor}"/>
                                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                                            <ItemsControl x:Name="HomeworkPreview" ItemsSource="{Binding HomeworkItems}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal" ItemWidth="240"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Style="{DynamicResource CardStyle}" Width="240">
                                                            <StackPanel>
                                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                                    <TextBlock Text="{Binding Icon}" FontSize="24" Margin="0,0,12,0" Foreground="{DynamicResource TextColor}"/>
                                                                    <TextBlock Text="{Binding Subject}" FontSize="18" FontWeight="Bold" Foreground="{Binding SubjectColor}"/>
                                                                </StackPanel>
                                                                <TextBlock Text="{Binding Content}" FontSize="25" TextWrapping="Wrap" Foreground="{DynamicResource TextColor}"/>
                                                            </StackPanel>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </Grid>
        </Border>

        <!-- åº•éƒ¨çŠ¶æ€æ  -->
        <Border Height="30" VerticalAlignment="Bottom" Background="{DynamicResource PanelBackgroundColor}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="0,1,0,0">
            <Grid x:Name="Footer">
                <TextBlock x:Name="FooterText" Text="Â© 2025 DOPæ¯æ—¥å§”æ‰˜é¢æ¿ ZFTONYåˆ¶ | ç‰ˆæœ¬ Beta0.3.7.1" FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{DynamicResource SecondaryTextColor}"/>
            </Grid>
        </Border>
    </Grid>
</Window>